<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.88.2/dist/phaser.min.js"></script>
</head>
<script>
const config = {
    type: Phaser.AUTO,
    width: window.innerWidth - 50,
    height: window.innerHeight - 50,
    physics: {
        default: 'arcade',
        arcade: {
            gravity: { y: 0 },
            debug: false
        }
    },
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

const game = new Phaser.Game(config);
let ball;
let isMoving = true;

function preload() {
    this.load.image('ball', 'goldenBall50px.png');
}

function create() {
    ball = this.physics.add.image(this.sys.game.config.width / 2, this.sys.game.config.height / 2, 'ball');
    ball.setDisplaySize(50, 50); // Keeps it visible
    ball.setCircle(25); // Adjusts the physics hitbox
    ball.setBounce(1);  // Ball will bounce off the walls
    ball.setVelocity(200, 150); // Initial velocity
    ball.setCollideWorldBounds(true); // Make sure the ball stays within the game bounds
    ball.setOrigin(0.5, 0.5); // Set the origin to the center

    // Ensure the ball's position is properly adjusted when it hits the boundary
    this.physics.world.bounds.width = this.sys.game.config.width;
    this.physics.world.bounds.height = this.sys.game.config.height;

    // Get buttons from the HTML and add event listeners
    document.getElementById("startButton").addEventListener("click", () => {
        isMoving = true;
        ball.setVelocity(200, 150); // Re-apply velocity when start button is pressed
    });

    document.getElementById("stopButton").addEventListener("click", () => {
        isMoving = false;
        ball.setVelocity(0, 0); // Stop the ball when stop button is pressed
    });
}

function update() {
    // The physics engine handles bouncing automatically
    if (!isMoving) {
        ball.setVelocity(0, 0); // Stop the ball if not moving
    }

    // Prevent ball from going off-screen
    if (ball.x - ball.displayWidth / 2 < 0) {
        ball.setX(ball.displayWidth / 2);
        ball.setVelocityX(Math.abs(ball.body.velocity.x)); // Reverse X velocity
    } 
    if (ball.x + ball.displayWidth / 2 > config.width) {
        ball.setX(config.width - ball.displayWidth / 2);
        ball.setVelocityX(-Math.abs(ball.body.velocity.x)); // Reverse X velocity
    }
    if (ball.y - ball.displayHeight / 2 < 0) {
        ball.setY(ball.displayHeight / 2);
        ball.setVelocityY(Math.abs(ball.body.velocity.y)); // Reverse Y velocity
    }
    if (ball.y + ball.displayHeight / 2 > config.height) {
        ball.setY(config.height - ball.displayHeight / 2);
        ball.setVelocityY(-Math.abs(ball.body.velocity.y)); // Reverse Y velocity
    }
}
</script>

<body>
    <button id="startButton" style="position: absolute; top: 10px; left: 10px;">Start</button>
    <button id="stopButton" style="position: absolute; top: 10px; left: 70px;">Stop</button>
</body>
</html>
